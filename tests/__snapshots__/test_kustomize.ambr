# serializer version: 1
# name: test_excludes_apps_correctly_expected[path0]
  '''
  apiVersion: source.toolkit.fluxcd.io/v1
  kind: GitRepository
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: flux-system
    namespace: flux-system
  spec:
    interval: 1m0s
    ref:
      branch: main
    secretRef:
      name: flux-system
    url: ssh://git@github.com/allenporter/flux-local
  ---
  apiVersion: kustomize.toolkit.fluxcd.io/v1
  kind: Kustomization
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: flux-system
    namespace: flux-system
  spec:
    interval: 10m0s
    path: ./tests/testdata/cluster/clusters/prod
    prune: true
    sourceRef:
      kind: GitRepository
      name: flux-system
  ---
  apiVersion: v1
  data:
    SECRET_DOMAIN: example.com
    SECRET_DOMAIN2: other.com
    cluster_label: example-value
  kind: ConfigMap
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: cluster-config
    namespace: flux-system
  ---
  apiVersion: kustomize.toolkit.fluxcd.io/v1
  kind: Kustomization
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: infra-controllers
    namespace: flux-system
  spec:
    interval: 1h
    path: ./tests/testdata/cluster/infrastructure/controllers
    prune: true
    retryInterval: 1m
    sourceRef:
      kind: GitRepository
      name: flux-system
    timeout: 5m
    wait: true
  ---
  apiVersion: kustomize.toolkit.fluxcd.io/v1
  kind: Kustomization
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: infra-configs
    namespace: flux-system
  spec:
    dependsOn:
    - name: infra-controllers
    interval: 1h
    path: ./tests/testdata/cluster/infrastructure/configs
    prune: true
    retryInterval: 1m
    sourceRef:
      kind: GitRepository
      name: flux-system
    timeout: 5m
  ---
  
  '''
# ---
# name: test_excludes_apps_correctly_expected[path1]
  '''
  apiVersion: source.toolkit.fluxcd.io/v1
  kind: GitRepository
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: flux-system
    namespace: flux-system
  spec:
    interval: 1m0s
    ref:
      branch: main
    secretRef:
      name: flux-system
    url: ssh://git@github.com/allenporter/flux-local
  ---
  apiVersion: kustomize.toolkit.fluxcd.io/v1
  kind: Kustomization
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: flux-system
    namespace: flux-system
  spec:
    interval: 10m0s
    path: ./tests/testdata/cluster/clusters/prod
    prune: true
    sourceRef:
      kind: GitRepository
      name: flux-system
  ---
  apiVersion: v1
  data:
    SECRET_DOMAIN: example.com
    SECRET_DOMAIN2: other.com
    cluster_label: example-value
  kind: ConfigMap
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: cluster-config
    namespace: flux-system
  ---
  apiVersion: kustomize.toolkit.fluxcd.io/v1
  kind: Kustomization
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: infra-controllers
    namespace: flux-system
  spec:
    interval: 1h
    path: ./tests/testdata/cluster/infrastructure/controllers
    prune: true
    retryInterval: 1m
    sourceRef:
      kind: GitRepository
      name: flux-system
    timeout: 5m
    wait: true
  ---
  apiVersion: kustomize.toolkit.fluxcd.io/v1
  kind: Kustomization
  metadata:
    labels:
      kustomize.toolkit.fluxcd.io/name: cluster10
      kustomize.toolkit.fluxcd.io/namespace: flux-system
    name: infra-configs
    namespace: flux-system
  spec:
    dependsOn:
    - name: infra-controllers
    interval: 1h
    path: ./tests/testdata/cluster/infrastructure/configs
    prune: true
    retryInterval: 1m
    sourceRef:
      kind: GitRepository
      name: flux-system
    timeout: 5m
  ---
  
  '''
# ---
# name: test_grep[path0]
  '''
  apiVersion: v1
  kind: ConfigMap
  metadata:
    namespace: flux-system
    name: cluster-settings
    annotations:
      config.kubernetes.io/index: '0'
      config.kubernetes.io/path: 'cluster-settings.yaml'
      internal.config.kubernetes.io/index: '0'
      internal.config.kubernetes.io/path: 'cluster-settings.yaml'
  data:
    CLUSTER: dev
    DOMAIN: example.org
  
  '''
# ---
# name: test_grep[path1]
  '''
  apiVersion: v1
  kind: ConfigMap
  metadata:
    namespace: flux-system
    name: cluster-settings
    annotations:
      config.kubernetes.io/index: '0'
      config.kubernetes.io/path: 'cluster-settings.yaml'
      internal.config.kubernetes.io/index: '0'
      internal.config.kubernetes.io/path: 'cluster-settings.yaml'
  data:
    CLUSTER: dev
    DOMAIN: example.org
  
  '''
# ---
# name: test_objects[path0]
  list([
    dict({
      'apiVersion': 'v1',
      'data': dict({
        'CLUSTER': 'dev',
        'DOMAIN': 'example.org',
      }),
      'kind': 'ConfigMap',
      'metadata': dict({
        'annotations': dict({
          'config.kubernetes.io/index': '0',
          'config.kubernetes.io/path': 'cluster-settings.yaml',
          'internal.config.kubernetes.io/index': '0',
          'internal.config.kubernetes.io/path': 'cluster-settings.yaml',
        }),
        'name': 'cluster-settings',
        'namespace': 'flux-system',
      }),
    }),
  ])
# ---
# name: test_objects[path1]
  list([
    dict({
      'apiVersion': 'v1',
      'data': dict({
        'CLUSTER': 'dev',
        'DOMAIN': 'example.org',
      }),
      'kind': 'ConfigMap',
      'metadata': dict({
        'annotations': dict({
          'config.kubernetes.io/index': '0',
          'config.kubernetes.io/path': 'cluster-settings.yaml',
          'internal.config.kubernetes.io/index': '0',
          'internal.config.kubernetes.io/path': 'cluster-settings.yaml',
        }),
        'name': 'cluster-settings',
        'namespace': 'flux-system',
      }),
    }),
  ])
# ---
